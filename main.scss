@import "o-icons/main";

@import "o-colors/main";

@include oColorsSetUseCase(expander-text, text, 'black');
@include oColorsSetUseCase(expander-icon, text, 'grey-tint2');

$o-expander-is-silent: true !default;

@mixin oExpanderContent {
	overflow: hidden;

	&[aria-hidden="true"] {
		display: none;
	}

	// Needs extra specificity
	&#{&}--expanded {
		max-height: none;
	}

	// The class is added via JS, so it can use the default name
	&--collapsed .o-expander__collapsible-item {
		display: none;
	}
}

@mixin oExpanderToggle($root-class-name: o-expander) {
	@include oColorsFor(expander-text, text);
	font-weight: normal;
	font-size: 12px;
	margin: 0;
	padding: 0;
	background: none;
	cursor: pointer;
	border: 0;

	i {
		@include oIconsGetIcon('arrow-down', oColorsGetColorFor(expander-icon, text), 15, 15, $iconset-version: 1);
		padding: 0 3px;
		vertical-align: middle;
	}

	&[aria-expanded="true"] i {
		// Rotate the icon rather than downloading another one
		// I call this the "Matt Hinchliffe manouvre"
		transform: rotate(180deg);
	}

	&:hover {
		text-decoration: none;
	}

	.#{$root-class-name}--inactive & {
		display: none;
	}
}

@if ($o-expander-is-silent == false) {
	.o-expander__content {
		@include oExpanderContent;
	}

	.o-expander__toggle {
		@include oExpanderToggle;
	}

	// Don't output twice
	$o-expander-is-silent: true !global;
}
